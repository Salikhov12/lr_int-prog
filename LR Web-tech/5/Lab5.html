<html>
<head>
<title>
Задание 1. Салихов Р.Н.
</title>
<style>
body{background:#75c1ff;}
.rotD{
	transform: rotate(90deg);
}
.rotU{
	transform: rotate(270deg);
}
.rotL{
	transform: scale(-1, 1);
}
</style>
</head>
<body>
<input type="button" id="go" value="go">
<img id="cat" src="../../img/pacman.gif" class="rotated" style="position:relative"><br>
<script src="../../lib/jquery-3.6.0.min.js"></script>
<script src="../../lib/jquery-ui-1.13.1.custom/jquery-ui.js"></script> 
<script>
var movm = 0;
var winh = $(window).height();
var winw = $(window).width();
$(document).ready(function(){

	$("#go").click(function (){
		if (movm == 0){
		 movm = 4;
		 moveT(4);
		}
		else{movm = 0;}
	});
	
	$(document).keyup(function(k){
		if (k.key=="ArrowUp" || k.keyCode==38){
			$("#cat").removeClass();
			$("#cat").addClass('rotU');
			movm = 1;
			moveT(1);
		}
		if (k.key=="ArrowDown" || k.keyCode==40){
			$("#cat").removeClass();
			$("#cat").addClass('rotD');
			movm = 2;
			moveT(2);
		}
		if (k.key=="ArrowLeft" || k.keyCode==37){
			$("#cat").removeClass();
			$("#cat").addClass('rotL');
			movm = 3;
			moveT(3);
		}
		if (k.key=="ArrowRight" || k.keyCode==39){
			$("#cat").removeClass();
			movm = 4;
			moveT(4);
		}
	});
	function moveT(where){
		if(($("#cat").position()['top']<$("#cat")[0].clientWidth)&&(where==1)){
			where=0;}
		if(((winh-$("#cat").position()['top'])<$("#cat")[0].clientWidth)&&(where==2)){
			where=0;}
		if(($("#cat").position()['left']<$("#cat")[0].clientWidth)&&(where==3)){
			where=0;}
		if((winw-$("#cat").position()['left']<$("#cat")[0].clientWidth)&&(where==4)){
			where=0;}	
			
			
		switch(where){
			case 1:$("#cat").animate({top:"-=32"},100);setTimeout(function() {if (movm == 1) {moveT(1);}},150);break;
			case 2:$("#cat").animate({top:"+=32"},100);setTimeout(function() {if (movm == 2) {moveT(2);}},150);break;
			case 3:$("#cat").animate({right:"+=32"},100);setTimeout(function() {if (movm == 3) {moveT(3);}},150);break;
			case 4:$("#cat").animate({right:"-=32"},100);setTimeout(function() {if (movm == 4) {moveT(4);}},150);break;
			default: $("#cat").effect( "shake",{distance:3, times:2},100);
		}
	}
});
</script>
<input type="button" value="Назад" onclick="location.href='../../index.php'"></input>
</body>
</html>